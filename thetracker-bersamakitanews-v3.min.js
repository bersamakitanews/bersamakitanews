var _ddomainhash,_dvisitorid,_dinittime,_dcreateddate,_darticleid,_dkanalid,_ddetikid,_dcustomparams,_dextraparams,_dSUBTYPE_WEB="web",_dSUBTYPE_MOBILE="mobile",_dacct="acc-default",_dacct_sub="-",_dwv="3.0",_dgifpath="//analytic.detik.com/detikanalytic/__dtm.gif",_dhash="on",_ddn="maindomain",_dtimeout="1800",_dtcp="/",_dtitle=1,_dsendtimeout=4e3,_ddoc=document,_dloc=_ddoc.location,_dcookie=_ddoc.cookie;function detikTracker(t){for(var e=new Array,d=0;d<t.length;d++){var i=t[d].getAttribute("name");null!=i&&-1!==i.indexOf("dtk:")&&(e[t[d].getAttribute("name").replace("dtk:","")]=t[d].getAttribute("content"))}setIDs(e.articleid),"0"!=e.status&&(void 0===e.createddateunix||void 0===e.publishdateunix?(e.createddate_ori=new Date(e.createddate).getTime(),e.createddate=new Date(e.publishdate).getTime(),e.publishdate=new Date(e.publishdate).getTime()):(e.createddate_str=e.createddate,e.publishdate_str=e.publishdate,e.createddate_ori=e.createddateunix,e.createddate=e.publishdateunix,e.publishdate=e.publishdateunix,delete e.createddateunix,delete e.publishdateunix),newKeys={pagesize:"custom_pagesize",pagenumber:"custom_pagenumber",articletype:"custom_pagetype",platform:"subacctype"},execution(e=renameKeys(e,newKeys)))}function renameKeys(t,e){var d={};for(var i in t)i in e?d[e[i]]=t[i]:d[i]=t[i];return d}function execution(t){void 0!==t.acctype&&void 0!==t.subacctype&&void 0!==t.createddate&&void 0!==t.articleid&&void 0!==t.kanalid?(_dacct=t.acctype,delete t.acctype,_dacct_sub=t.subacctype,delete t.subacctype,_dcreateddate=t.createddate,delete t.createddate,_darticleid=t.articleid,delete t.articleid,_dkanalid=t.kanalid,delete t.kanalid,_dcustomparams=_dGetCustomParams(t),_dextraparams=_dGetExtraParams(t),setIDs(_darticleid),collectData(),processData(),setTimeout(sendData(),_dsendtimeout)):console.log("[DetikAnalytic] These fields are required: acctype, subacctype, createddate, articleid, kanalid!")}function collectData(){_ddomainhash=_dDomainHash(),_dvisitorid=Math.round(2147483647*Math.random()),_dinittime=Math.round((new Date).getTime()/1e3),_ddetikid="-"!=(_ddetikid=_dGC(_dcookie,"D_ISS",";"))?_ddetikid.split("=")[1]:""}function processData(){var t,e,d,i,a="",n=" expires="+new Date((new Date).getTime()+63072e6).toGMTString()+";";_dtimeout&&""!=_dtimeout&&(a=" expires="+new Date((new Date).getTime()+1e3*_dtimeout).toGMTString()+";"),_ddn&&""!=_ddn&&(t=" domain= ."+_dDomainPath()+";"),e=_dcookie.indexOf("__dtma="+_ddomainhash+"."),d=_dcookie.indexOf("__dtmb="+_ddomainhash),i=_dcookie.indexOf("__dtmc="+_ddomainhash),0<=e&&0<=d&&0<=i?(d=_dFixB(_ddoc.cookie,";",_dinittime),_ddoc.cookie="__dtmb="+d+"; path="+_dtcp+";"+a+t):(e=0<=e?_dFixA(_ddoc.cookie,";",_dinittime):_ddomainhash+"."+_dvisitorid+"."+_dinittime+"."+_dinittime+"."+_dinittime+".1",d=0<=d?_dFixB(_ddoc.cookie,";",_dinittime):_ddomainhash+".1.10."+_dinittime,_ddoc.cookie="__dtma="+e+"; path="+_dtcp+";"+n+t,_ddoc.cookie="__dtmb="+d+"; path="+_dtcp+";"+a+t,_ddoc.cookie="__dtmc="+_ddomainhash+"; path="+_dtcp+";"+t)}function sendData(){var t="",e=_dloc.pathname+_dloc.search,d="";d+="&dtmn="+_dvisitorid,_dtitle&&_ddoc.title&&""!=_ddoc.title&&(d+="&dtmdt="+_dES(_ddoc.title)),_dloc.hostname&&""!=_dloc.hostname&&(d+="&dtmhn="+_dES(_dloc.hostname)),d+="&dtmp="+e,!1!==getCookieData("__dtmf")?d+="&dtmf="+getCookieData("__dtmf"):d+="&dtmf=-","-"!=(t=_dGC(_ddoc.cookie,"__dtma="+_ddomainhash+".",";"))&&(d+="&dtma="+t),"-"!=(t=_dGC(_ddoc.cookie,"__dtmb="+_ddomainhash+".",";"))&&(d+="&dtmb="+t),d+="&dtmr="+_ddoc.referrer,d+=_dConstructMP();var i=new Image(1,1);i.src=_dgifpath+"?dtmwv="+_dwv+d+"&dtmac="+_dacct+"&dtmacsub="+_dacct_sub+_dextraparams,i.onload=function(){}}function _dGetCustomParams(t){var e="";for(var d in t)-1!=d.indexOf("custom-")&&(e+="&"+d.replace("-","_")+"="+t[d]);return e}function _dGetExtraParams(t){var e=[];for(var d in t)t.hasOwnProperty(d)&&(-1!=d.indexOf("custom-")||e.push(d+"="+encodeURIComponent(t[d])));return"&"+e.join("&")}function _dConstructMP(){var t="";return""!=_dcreateddate&&(t+="&createddate="+_dcreateddate),""!=_darticleid&&(t+="&articleid="+_darticleid),""!=_dkanalid&&(t+="&kanalid="+_dkanalid),""!=_ddetikid&&(t+="&detik_id="+_ddetikid),""!=_dcustomparams&&(t+=_dcustomparams),t}function _dFixA(t,e,d){if(!t||""==t||!e||""==e||!d||""==d)return"-";var i=_dGC(t,"__dtma="+_ddomainhash+".",e),a=0,n=0;return 9<(n=i.lastIndexOf("."))&&(_uns=i.substring(n+1,i.length),_uns=+_uns+1,7<(n=(i=i.substring(0,n)).lastIndexOf("."))&&(a=i.substring(n+1,i.length),i=i.substring(0,n)),5<(n=i.lastIndexOf("."))&&(i=i.substring(0,n)),i+="."+a+"."+d+"."+_uns),i}function _dFixB(t,e,d){if(!t||""==t||!e||""==e||!d||""==d)return"-";var i=_dGC(t,"__dtmb="+_ddomainhash,e),a=i.indexOf("."),n=i.indexOf(".",a+1),o=i.substring(0,a),_=i.substring(a+1,n);return i=o+"."+(_=+_+1)+".10."+d}function _dDomainHash(){var t=_dDomainPath();return""==t?1:_dHash(t)}function _dDomainPath(){if("maindomain"!=_ddn){if("auto"!=_ddn)return"";var t=_ddoc.domain;return"www."==t.substring(0,4)&&(t=t.substring(4,t.length)),t}for(var e,d=["com","id"].join(),i=window.location.hostname.split("."),a=i.length,n=a,o=i[i.length-1].length;e=i[--n];)if(d.indexOf(e)<0||e.length<o||n<a-2||0===n)return e+"."+i[a-1]}function _dHash(t){if(!t||""==t)return 1;for(var e=0,d=0,i=t.length-1;0<=i;i--){var a=parseInt(t.charCodeAt(i));0!=(d=266338304&(e=(e<<6&268435455)+a+(a<<14)))&&(e^=d>>21)}return e}function _dGC(t,e,d){if(!t||""==t||!e||""==e||!d||""==d)return"-";var i,a="-",n=t.indexOf(e),o=e.indexOf("=")+1;return-1<n&&((i=t.indexOf(d,n))<0&&(i=t.length),a=t.substring(n+o,i)),a}function _dES(t,e){return("function"==typeof encodeURIComponent?e?encodeURI:encodeURIComponent:escape)(t)}function getCookieData(t){for(var e,d=_ddoc.cookie.split("; "),i=d.length;i--;)if((e=d[i].split("="))[0]===t)return e[1];return!1}function setCookie(t,e,d){var i=new Date,a=";domain= ."+_dDomainPath()+";";i.setTime(i.getTime()+24*d*60*60*1e3);var n="expires="+i.toUTCString();_ddoc.cookie=t+"="+e+";"+n+";path=/"+a}function setIDs(t){""!=t&&"-"!=t&&(ids=getCookieData("__dtmids"),ids?(aID=ids.split(","),aID.includes(t)||(aID.push(t),10<aID.length&&aID.shift(),setCookie("__dtmids",aID.toString(),1))):setCookie("__dtmids",t,1))}
